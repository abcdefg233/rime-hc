local comment_map={
 ["alabo"]="Emoji",
 ["alaboren"]="Emoji",
 ["bairen"]="Emoji",
 ["baizhongren"]="Emoji",
 ["bao"]="Emoji",
 ["cai"]="Emoji",
 ["canju"]="Emoji",
 ["che"]="Emoji",
 ["chenggui"]="Emoji",
 ["chong"]="Emoji",
 ["chuan"]="Emoji",
 ["chuandian"]="Emoji",
 ["chusheng"]="Emoji",
 ["culiang"]="Emoji",
 ["daziran"]="Emoji",
 ["dianqi"]="Emoji",
 ["dianxin"]="Emoji",
 ["dianzi"]="Emoji",
 ["ditie"]="Emoji",
 ["dongwu"]="Emoji",
 ["dongwulian"]="Emoji",
 ["dongyaren"]="Emoji",
 ["dongyayi"]="Emoji",
 ["duomeiti"]="Emoji",
 ["fan"]="Emoji",
 ["fangxing"]="Emoji",
 ["fase"]="Emoji",
 ["faxing"]="Emoji",
 ["feixingqi"]="Emoji",
 ["fuse"]="Emoji",
 ["fushi"]="Emoji",
 ["fuzhuang"]="Emoji",
 ["gongjiao"]="Emoji",
 ["gongju"]="Emoji",
 ["guaiwu"]="Emoji",
 ["guo"]="Emoji",
 ["hanleng"]="Emoji",
 ["heiren"]="Emoji",
 ["hua"]="Emoji",
 ["huaduo"]="Emoji",
 ["huangzhongren"]="Emoji",
 ["huobi"]="Emoji",
 ["huoche"]="Emoji",
 ["jiang"]="Emoji",
 ["jiangpai"]="Emoji",
 ["jianguo"]="Emoji",
 ["jiangxiang"]="Emoji",
 ["jiaqin"]="Emoji",
 ["jieri"]="Emoji",
 ["jingdian"]="Emoji",
 ["jingguai"]="Emoji",
 ["jiu"]="Emoji",
 ["jixie"]="Emoji",
 ["juan"]="Emoji",
 ["kexue"]="Emoji",
 ["kuaican"]="Emoji",
 ["lading"]="Emoji",
 ["ladingyi"]="Emoji",
 ["lamei"]="Emoji",
 ["lameiren"]="Emoji",
 ["lameiyi"]="Emoji",
 ["leng"]="Emoji",
 ["liang"]="Emoji",
 ["lingshi"]="Emoji",
 ["mao"]="Emoji",
 ["maozi"]="Emoji",
 ["mianbao"]="Emoji",
 ["mingsheng"]="Emoji",
 ["musilin"]="Emoji",
 ["niao"]="Emoji",
 ["qiche"]="Emoji",
 ["qiguan"]="Emoji",
 ["qiu"]="Emoji",
 ["qixiang"]="Emoji",
 ["reyin"]="Emoji",
 ["ribencai"]="Emoji",
 ["riliao"]="Emoji",
 ["rishiliaoli"]="Emoji",
 ["riyong"]="Emoji",
 ["rou"]="Emoji",
 ["shengchu"]="Emoji",
 ["shengxiao"]="Emoji",
 ["shizhong"]="Emoji",
 ["shucai"]="Emoji",
 ["shuiguo"]="Emoji",
 ["shuma"]="Emoji",
 ["tiandian"]="Emoji",
 ["tianqi"]="Emoji",
 ["tianshi"]="Emoji",
 ["tiaoliao"]="Emoji",
 ["waihui"]="Emoji",
 ["weishengdongwu"]="Emoji",
 ["wucan"]="Emoji",
 ["wuqi"]="Emoji",
 ["xican"]="Emoji",
 ["xie"]="Emoji",
 ["xiezi"]="Emoji",
 ["xingzuo"]="Emoji",
 ["xinxing"]="Emoji",
 ["xue"]="Emoji",
 ["xuexing"]="Emoji",
 ["yanjing"]="Emoji",
 ["yanse"]="Emoji",
 ["yayi"]="Emoji",
 ["yayinan"]="Emoji",
 ["yayinv"]="Emoji",
 ["ye"]="Emoji",
 ["yekong"]="Emoji",
 ["yewei"]="Emoji",
 ["yifu"]="Emoji",
 ["yinliao"]="Emoji",
 ["youhai"]="Emoji",
 ["youleyuan"]="Emoji",
 ["yu"]="Emoji",
 ["yuansu"]="Emoji",
 ["yuanxing"]="Emoji",
 ["yueqi"]="Emoji",
 ["yuexiang"]="Emoji",
 ["yule"]="Emoji",
 ["yundong"]="Emoji",
 ["yundongyuan"]="Emoji",
 ["zaocan"]="Emoji",
 ["zaodian"]="Emoji",
 ["zhengcan"]="Emoji",
 ["zhengfangxing"]="Emoji",
 ["zhibi"]="Emoji",
 ["zhiwu"]="Emoji",
 ["zhongcan"]="Emoji",
 ["zhonghua"]="Emoji",
 ["ziran"]="Emoji",
 ["zongjiao"]="Emoji",
 ["zongseren"]="Emoji",
 ["zongserenzhong"]="Emoji",
 ["iro"]="いろは順",
 ["sb"]="上标",
 ["xb"]="下标",
 ["lx"]="两性",
 ["ey"]="俄语",
 ["eyd"]="俄语大写",
 ["jm"]="假名",
 ["jmbj"]="假名+半角",
 ["jmq"]="假名+圈",
 ["jma"]="假名a",
 ["jmb"]="假名b",
 ["jmd"]="假名d",
 ["jme"]="假名e",
 ["jmg"]="假名g",
 ["jmh"]="假名h",
 ["jmi"]="假名i",
 ["jmk"]="假名k",
 ["jmm"]="假名m",
 ["jmn"]="假名n",
 ["jmo"]="假名o",
 ["jmp"]="假名p",
 ["jmr"]="假名r",
 ["jms"]="假名s",
 ["jmt"]="假名t",
 ["jmu"]="假名u",
 ["jmw"]="假名w",
 ["jmy"]="假名y",
 ["jmz"]="假名z",
 ["bg"]="八卦",
 ["bgm"]="八卦名",
 ["lssg"]="六十四卦",
 ["lssgm"]="六十四卦名",
 ["bai"]="其他",
 ["budeng"]="其他",
 ["budengyu"]="其他",
 ["cheng"]="其他",
 ["chu"]="其他",
 ["cuo"]="其他",
 ["dayu"]="其他",
 ["dian"]="其他",
 ["du"]="其他",
 ["dui"]="其他",
 ["genhao"]="其他",
 ["hsd"]="其他",
 ["jgh"]="其他",
 ["nacui"]="其他",
 ["nian"]="其他",
 ["pai"]="其他",
 ["pi"]="其他",
 ["qian"]="其他",
 ["sa"]="其他",
 ["shang"]="其他",
 ["ssd"]="其他",
 ["suoyi"]="其他",
 ["wanzi"]="其他",
 ["xi"]="其他",
 ["xia"]="其他",
 ["xiaoyu"]="其他",
 ["yinwei"]="其他",
 ["you"]="其他",
 ["youshang"]="其他",
 ["youxia"]="其他",
 ["yuan"]="其他",
 ["zhengfu"]="其他",
 ["zhengfuhao"]="其他",
 ["zuo"]="其他",
 ["zuoshang"]="其他",
 ["zuoxia"]="其他",
 ["zuoyou"]="其他",
 ["jh"]="几何",
 ["fs"]="分数",
 ["xzg"]="十二宫",
 ["dw"]="单位",
 ["dz"]="地支",
 ["sd"]="声调",
 ["tt"]="天体",
 ["tg"]="天干",
 ["gz"]="天干地支",
 ["tq"]="天气",
 ["txj"]="太玄经",
 ["zmq"]="字母+圈",
 ["zmh"]="字母+弧",
 ["xl"]="希腊",
 ["xld"]="希腊",
 ["pjm"]="平假名",
 ["kx"]="康熙",
 ["pk"]="扑克",
 ["A"]="拉丁",
 ["AA"]="拉丁",
 ["AE"]="拉丁",
 ["AO"]="拉丁",
 ["AU"]="拉丁",
 ["AV"]="拉丁",
 ["AY"]="拉丁",
 ["B"]="拉丁",
 ["C"]="拉丁",
 ["D"]="拉丁",
 ["E"]="拉丁",
 ["F"]="拉丁",
 ["G"]="拉丁",
 ["H"]="拉丁",
 ["HV"]="拉丁",
 ["I"]="拉丁",
 ["IJ"]="拉丁",
 ["J"]="拉丁",
 ["K"]="拉丁",
 ["L"]="拉丁",
 ["LL"]="拉丁",
 ["M"]="拉丁",
 ["N"]="拉丁",
 ["NJ"]="拉丁",
 ["Nj"]="拉丁",
 ["O"]="拉丁",
 ["OE"]="拉丁",
 ["OI"]="拉丁",
 ["OO"]="拉丁",
 ["OU"]="拉丁",
 ["P"]="拉丁",
 ["Q"]="拉丁",
 ["R"]="拉丁",
 ["Rx"]="拉丁",
 ["S"]="拉丁",
 ["T"]="拉丁",
 ["TZ"]="拉丁",
 ["U"]="拉丁",
 ["V"]="拉丁",
 ["VY"]="拉丁",
 ["W"]="拉丁",
 ["X"]="拉丁",
 ["Y"]="拉丁",
 ["Z"]="拉丁",
 ["a"]="拉丁",
 ["aa"]="拉丁",
 ["ae"]="拉丁",
 ["ao"]="拉丁",
 ["au"]="拉丁",
 ["av"]="拉丁",
 ["ay"]="拉丁",
 ["b"]="拉丁",
 ["c"]="拉丁",
 ["d"]="拉丁",
 ["db"]="拉丁",
 ["e"]="拉丁",
 ["f"]="拉丁",
 ["ff"]="拉丁",
 ["ffi"]="拉丁",
 ["ffl"]="拉丁",
 ["fi"]="拉丁",
 ["fl"]="拉丁",
 ["fn"]="拉丁",
 ["g"]="拉丁",
 ["h"]="拉丁",
 ["hv"]="拉丁",
 ["i"]="拉丁",
 ["ij"]="拉丁",
 ["j"]="拉丁",
 ["k"]="拉丁",
 ["l"]="拉丁",
 ["lj"]="拉丁",
 ["ll"]="拉丁",
 ["ls"]="拉丁",
 ["lz"]="拉丁",
 ["m"]="拉丁",
 ["n"]="拉丁",
 ["nj"]="拉丁",
 ["o"]="拉丁",
 ["oe"]="拉丁",
 ["oi"]="拉丁",
 ["oo"]="拉丁",
 ["ou"]="拉丁",
 ["p"]="拉丁",
 ["q"]="拉丁",
 ["qp"]="拉丁",
 ["r"]="拉丁",
 ["s"]="拉丁",
 ["t"]="拉丁",
 ["tc"]="拉丁",
 ["th"]="拉丁",
 ["ts"]="拉丁",
 ["tz"]="拉丁",
 ["u"]="拉丁",
 ["ue"]="拉丁",
 ["v"]="拉丁",
 ["vy"]="拉丁",
 ["w"]="拉丁",
 ["ww"]="拉丁",
 ["x"]="拉丁",
 ["y"]="拉丁",
 ["z"]="拉丁",
 ["py"]="拼音",
 ["pyd"]="拼音大写",
 ["0"]="数字",
 ["1"]="数字",
 ["10"]="数字",
 ["2"]="数字",
 ["3"]="数字",
 ["4"]="数字",
 ["5"]="数字",
 ["6"]="数字",
 ["7"]="数字",
 ["8"]="数字",
 ["9"]="数字",
 ["szq"]="数字+圆",
 ["szh"]="数字+弧",
 ["szd"]="数字+点",
 ["sx"]="数学",
 ["fk"]="方块",
 ["rq"]="日期",
 ["sj"]="时间",
 ["xh"]="星号",
 ["xz"]="星座",
 ["xzm"]="星座名",
 ["yr"]="曜日",
 ["yf"]="月份",
 ["hzq"]="汉字+圈",
 ["hzh"]="汉字+弧",
 ["zy"]="注音",
 ["dn"]="电脑",
 ["fh"]="符号",
 ["jt"]="箭头",
 ["jg"]="结构",
 ["lm"]="罗马数字",
 ["lmd"]="罗马数字大写",
 ["sz"]="色子",
 ["jq"]="节气",
 ["szm"]="苏州码",
 ["bq"]="表情",
 ["xq"]="象棋",
 ["hb"]="货币",
 ["pp"]="部首",
 ["backspace"]="键盘符号",
 ["cap"]="键盘符号",
 ["caps"]="键盘符号",
 ["cmd"]="键盘符号",
 ["ctrl"]="键盘符号",
 ["del"]="键盘符号",
 ["eject"]="键盘符号",
 ["enter"]="键盘符号",
 ["escape"]="键盘符号",
 ["opt"]="键盘符号",
 ["return"]="键盘符号",
 ["shift"]="键盘符号",
 ["space"]="键盘符号",
 ["hw"]="韩文",
 ["hwq"]="韩文+圈",
 ["hwh"]="韩文+弧",
 ["yy"]="音乐",
 ["mj"]="麻将",
}
local tran
local symbol
local code_start
return
{
 init=function(env)
  symbol=env.engine.schema.config:get_string("recognizer/lua/custom_symbol")
  code_start=#symbol+1
  tran=Component.Translator(env.engine,"","table_translator@custom_symbol")
 end,
 func=function(_,seg,env)
  if not seg:has_tag("custom_symbol") then return end
  tips(env,"〔符号输出〕")
  local input=env.engine.context.input:sub(code_start) if input=="" then return end
  local seg_end=#env.engine.context.input
  local query=tran:query(input,seg) if not query then return end
  for cand in query:iter() do
   cand.comment=cand.comment.."『"..comment_map[input].."』"
   cand._end=seg_end
   yield(cand)
  end
 end
}